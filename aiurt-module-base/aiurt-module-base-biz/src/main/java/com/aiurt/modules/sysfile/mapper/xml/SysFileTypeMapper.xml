<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aiurt.modules.sysfile.mapper.SysFileTypeMapper">
    <select id="selectChildId" parameterType="java.lang.Long" resultType="java.lang.Long">
        SELECT T2.id
        FROM
            (
                SELECT
                        @ids AS _ids,
                        (SELECT @ids := GROUP_CONCAT(id) FROM sys_file_type WHERE FIND_IN_SET(parent_id,@ids)) AS cids
                FROM
                        sys_file_type ,
                        ( SELECT @ids := #{typeId}, @l := 0 ) b
                WHERE
                        @ids IS NOT NULL
            ) T1 ,
            sys_file_type T2
        WHERE
            FIND_IN_SET(T2.id,T1._ids)
    </select>
</mapper>
