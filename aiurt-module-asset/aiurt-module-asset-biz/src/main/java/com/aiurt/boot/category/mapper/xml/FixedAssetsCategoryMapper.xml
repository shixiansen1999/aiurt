<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aiurt.boot.category.mapper.FixedAssetsCategoryMapper">
    <select id="pageList" resultType="com.aiurt.boot.category.dto.FixedAssetsCategoryDTO">
        select id, pid, category_name, category_code, remark, level
        from fixed_assets_category
                where del_flag = 0
        <if test="condition.categoryCode != null and condition.categoryCode != ''">
            and category_code like concat('%', #{condition.categoryCode}, '%')
        </if>
        <if test="condition.categoryName != null and condition.categoryName != ''">
            and category_name like concat('%', #{condition.categoryName}, '%')
        </if>
        <if test="condition.id != null and condition.id != ''">
            and id = #{condition.id}
        </if>
        <if test="condition.treeCode != null and condition.treeCode.size() != 0">
            and category_code in
            <foreach collection="condition.treeCode" item="item" separator="," open="(" close=")">
                #{item}
            </foreach>
        </if>
        order by create_time desc
    </select>
    <select id="getList" resultType="com.aiurt.boot.category.dto.FixedAssetsCategoryDTO">
        select id, pid, category_name, category_code, remark, create_time, level
        from fixed_assets_category
                where del_flag = 0
        <if test="condition.categoryCode != null and condition.categoryCode != ''">
            and category_code like concat('%', #{condition.categoryCode}, '%')
        </if>
        <if test="condition.categoryName != null and condition.categoryName != ''">
            and category_name like concat('%', #{condition.categoryName}, '%')
        </if>
        <if test="condition.id != null and condition.id != ''">
            and id = #{condition.id}
        </if>
        <if test="condition.selections != null and condition.selections.size() != 0">
            and id in
            <foreach collection="condition.selections" item="item" separator="," open="(" close=")">
                #{item}
            </foreach>
        </if>
        <if test="condition.treeCode != null and condition.treeCode.size() != 0">
            and category_code in
            <foreach collection="condition.treeCode" item="item" separator="," open="(" close=")">
                #{item}
            </foreach>
        </if>
    </select>

    <select id="getAssetsCategory" resultType="com.aiurt.boot.category.entity.FixedAssetsCategory">
        select id, pid, category_name, category_code, remark, create_time, level
        from fixed_assets_category
        where del_flag = 0
          and category_name = #{categoryName}
          and pid = #{pid}
    </select>
</mapper>