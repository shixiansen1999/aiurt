<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aiurt.boot.modules.secondLevelWarehouse.mapper.StockInOrderLevel2Mapper">

    <select id="queryPageList"
            resultType="com.aiurt.boot.modules.secondLevelWarehouse.entity.vo.StockInOrderLevel2VO">
        SELECT
            si.id AS id,
            si.order_code AS orderCode,
            w.stock_name AS warehouseName,
            su.realname AS operatorName,
            si.stock_in_time AS stockInTime,
            si.note AS note
        FROM
            stock_in_order_level2 si
            LEFT JOIN cs_stock_level_two w ON w.stock_code = si.warehouse_code
            LEFT JOIN sys_user su ON su.id = si.create_by
        WHERE
            si.del_flag =0
            <if test="stockInOrderLevel2.orderCode!=null and stockInOrderLevel2.orderCode!=''">
                AND si.order_code = #{stockInOrderLevel2.orderCode}
            </if>
            <if test="stockInOrderLevel2.warehouseCode!=null and stockInOrderLevel2.warehouseCode!=''">
                AND si.warehouse_code = #{stockInOrderLevel2.warehouseCode}
            </if>
            <if test="startTime!=null and startTime!='' and endTime!=null and endTime!='' ">
                AND si.stock_in_time BETWEEN #{startTime} AND #{endTime}
            </if>
        ORDER BY
            si.create_time DESC
    </select>
    <select id="selectExcelData"
            resultType="com.aiurt.boot.modules.secondLevelWarehouse.entity.dto.StockInOrderLevel2Excel">
        SELECT
            si.order_code AS orderCode,
            w.stock_name AS warehouseName,
            su.realname AS operatorName,
            si.stock_in_time AS stockInTime,
            si.note AS note
        FROM
            stock_in_order_level2 si
            LEFT JOIN cs_stock_level_two w ON w.stock_code = si.warehouse_code
            LEFT JOIN sys_user su ON su.id = si.create_by
        WHERE
            si.id IN (
                <foreach collection="selections" separator="," item="item">
                    #{item}
                </foreach>
                )
    </select>
</mapper>
