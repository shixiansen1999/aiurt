(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4072805a"],{"1bcd":function(e,t,a){},"4cef":function(e,t,a){"use strict";var r=a("1bcd"),s=a.n(r);s.a},"6a4a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("今日任务")])]),e._v(" "),a("el-form",{ref:"searchForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"任务类型"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.searchForm.taskType,callback:function(t){e.$set(e.searchForm,"taskType",t)},expression:"searchForm.taskType"}},e._l(e.taskTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"任务状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.searchForm.taskStatus,callback:function(t){e.$set(e.searchForm,"taskStatus",t)},expression:"searchForm.taskStatus"}},e._l(e.taskStatusSelect,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"执行人"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.searchForm.executeUserId,callback:function(t){e.$set(e.searchForm,"executeUserId",t)},expression:"searchForm.executeUserId"}},e._l(e.userIdSelect,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-row",{staticClass:"form-center"},[a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small",round:""},on:{click:e.getSeachTableData}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",round:""},on:{click:e.clearSearchForm}},[e._v("清空")])],1)],1)],1)],1),e._v(" "),a("el-card",{staticClass:"box-card"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"",stripe:"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"taskType",label:"任务类型",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("formatTaskTypeStatus")(t.row.taskType))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"taskStatus",label:"任务状态",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("formatTaskStatusStatus")(t.row.taskStatus))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"executeRealName",label:"执行人",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"taskContent",label:"任务内容",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"issuerRealName",label:"发布人",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"taskDate",label:"任务日期",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"askFinishDate",label:"要求完成时间",align:"left",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"finishDate",label:"实际完成时间",align:"left",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.hanldeImport(1,t)}}},[e._v("详 情")])]}}])})],1)],1)],1)},s=[],o=(a("7f7f"),a("ac6a"),a("4e9e")),l=a("828d"),i=a("91a6"),n=a("4328"),c=a.n(n),u={name:"directive_page",filters:{formatTaskStatusStatus:function(e){return Object(o["a"])(Object(i["o"])(),e)},formatTaskTypeStatus:function(e){return Object(o["a"])(i["p"],e)}},data:function(){return{spinShow:!1,rules:{subjectTitle:[{required:!0,message:"请输入话题标题",trigger:"blur"}],keyword:[{required:!0,message:"请输入关键词（逗号分隔）",trigger:"blur"}]},dataList:[],searchForm:{taskType:"",taskStatus:"",executeUserId:""},userInfoModal:!1,userInfoFlag:0,userInfoForm:{userId:"",workDateString:"",reason:"",id:""},userInfoFormRules:{userId:[{required:!0,message:"请选择请假人员",trigger:"change"}],reason:[{required:!0,message:"请输入加班理由",trigger:"change"}],workDateString:[{required:!0,message:"请选择开始时间",trigger:"blur"}]},userIdSelect:Object(i["s"])(),isOrNot:i["f"],lineIdSelect:[],taskTypeList:i["p"],taskStatusSelect:Object(i["o"])(),page:1,size:10,total:0}},created:function(){},mounted:function(){this.funcToBackPage()},beforeDestroy:function(){},methods:{commit:function(e){var t=this;1===e&&(t.userInfoFlag=0,t.userInfoModal=!0,t.userInfoForm={userId:"",workDateString:"",reason:"",id:""})},hanldeImport:function(e,t){var a=this;if(1===e){if(1===t.row.taskType){var r=a.getSearchForm();this.$store.commit("addUrlParams",{params:r}),this.$router.push({path:"/seeAlso_task_detail",query:{toName:this.$route.path,id:t.row.id}})}if(2===t.row.taskType){var s=a.getSearchForm();this.$store.commit("addUrlParams",{params:s}),this.$router.push({path:"/maintenance_task_detail",query:{toName:this.$route.path,id:t.row.id}})}if(3===t.row.taskType){var o=a.getSearchForm();this.$store.commit("addUrlParams",{params:o}),this.$router.push({path:"/servicing_task_detail",query:{toName:this.$route.path,id:t.row.id}})}if(4===t.row.taskType){var l=a.getSearchForm();this.$store.commit("addUrlParams",{params:l}),this.$router.push({path:"/train_task_detail",query:{toName:this.$route.path,id:t.row.id}})}if(5===t.row.taskType){var i=a.getSearchForm();this.$store.commit("addUrlParams",{params:i}),this.$router.push({path:"/other_task_detail",query:{toName:this.$route.path,id:t.row.id}})}}},userInfoModalSubmit:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(e){var r={id:a.userInfoForm.id,userId:a.userInfoForm.userId,workDateString:a.$moment(a.userInfoForm.workDateString).format("YYYY-MM-DD"),reason:a.userInfoForm.reason};oaOvertime_workSave(c.a.stringify(r),{arrayFormat:"brackets"}).then(function(e){200===e.code?(a.$message.success("操作成功"),a.userInfoModal=!1,t.funcToBackPage()):a.$message.error(e.message)})}})},userInfoModalClose:function(e){var t=this;t.userInfoModal=!1,this.$refs[e].resetFields()},getTableData:function(e){var t=this,a=this;Object(l["pc"])(e).then(function(e){if(200===e.code){var r=e.data;a.dataList=r,a.total=r.total,t.spinShow=!1}else a.$message.error(e.message)})},getSearchForm:function(){var e=this.searchForm,t=this,a={executeUserId:e.executeUserId,taskType:e.taskType,taskStatus:e.taskStatus,page:t.page,size:t.size};return a},getSeachTableData:function(){var e=this;this.page=1,this.getTableData(e.getSearchForm())},handleSelectionChange:function(e){var t=this;t.returnBackIds=[],this.multipleSelection=e,this.multipleSelection.forEach(function(e){t.returnBackIds.push(e.id)})},clearSearchForm:function(){var e=this;e.searchForm={taskType:"",taskStatus:"",executeUserId:""},e.page=1,e.size=10,e.getTableData(e.getSearchForm())},handleSizeChange:function(e){var t=this;t.size=e,t.getTableData(t.getSearchForm())},handleCurrentChange:function(e){var t=this;t.page=e,t.getTableData(t.getSearchForm())},funcToBackPage:function(){var e=this.$route.name,t=window.localStorage.getItem("urlParams")||null,a=window.localStorage.getItem("wherePage")||null;a===e&&t?(t=JSON.parse(t),this.funcBackSearchForm(t),this.getTableData(t)):((a||t)&&this.$store.commit("clearBackURL"),this.getTableData(this.getSearchForm()))},funcBackSearchForm:function(e){this.searchForm.taskType=e.hasOwnProperty("taskType")&&e.taskType?e.taskType:"",this.searchForm.taskStatus=e.hasOwnProperty("taskStatus")&&e.taskStatus?e.taskStatus:"",this.searchForm.executeUserId=e.hasOwnProperty("executeUserId")&&e.executeUserId?e.executeUserId:"",this.page=e.hasOwnProperty("page")&&e.page?e.page:"",this.size=e.hasOwnProperty("size")&&e.size?e.size:""}}},h=u,m=(a("4cef"),a("2877")),d=Object(m["a"])(h,r,s,!1,null,null,null);t["default"]=d.exports}}]);