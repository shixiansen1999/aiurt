<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aiurt.modules.workarea.mapper.WorkAreaOrgMapper">

<select id="getOrgName" resultType="java.lang.String">
SELECT
	sd.depart_name  AS orgName
FROM
	work_area_org wao
	LEFT JOIN sys_depart sd ON wao.org_code = sd.org_code
WHERE
	wao.work_area_code =  #{code}
	and sd.del_flag = 0
</select>

	<select id="getLineStationName" resultType="java.lang.String">
		select concat_ws("/", cs.line_name, cs.station_name) as linestationname
		from work_area_station was
		left join cs_station cs on (was.station_code = cs.station_code and cs.del_flag = 0)
		where was.del_flag = 0
		and was.work_area_code in (
		select distinct wao.work_area_code
		from work_area_org wao
		where wao.del_flag = 0
		<if test="orgCode != null and orgCode != ''">
			and wao.org_code = #{orgCode}
		</if>
		)
	</select>
</mapper>
