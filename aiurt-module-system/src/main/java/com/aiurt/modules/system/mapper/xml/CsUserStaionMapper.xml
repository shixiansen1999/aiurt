<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aiurt.modules.system.mapper.CsUserStaionMapper">

<select id="getStaionIds" resultType="java.lang.String">
    select station_id from cs_user_station where user_id = #{userId}
    </select>

<select id="getStationByUserId" resultType="org.jeecg.common.system.vo.CsUserStationModel">
    select cus.id ,cus.user_id,cus.station_id,cs.station_code ,cs.station_name,cs.line_code,cl.id as lineId
    from cs_user_station cus
    left join cs_station cs on cs.id = cus.station_id
    left join cs_line cl on cs.line_code = cl.line_code and cl.del_flag = 0
    where cs.del_flag = 0
    <if test="id != null and id != ''">
        and cus.user_id = #{id}
    </if>
    order by cl.sort,cl.line_code,cs.sort,cs.station_code
    </select>


    <select id="queryByUserIdAndLineCode" resultType="org.jeecg.common.system.vo.CsUserStationModel">
        select cus.id ,cus.user_id,cus.station_id,cs.station_code ,cs.station_name,cs.line_code,cl.id as lineId
        from cs_user_station cus
                     left join cs_station cs on cs.id = cus.station_id
                     left join cs_line cl on cs.line_code = cl.line_code and cl.del_flag = 0
        where cs.del_flag = 0
        and cus.user_id = #{userId} and cs.line_code = #{lineCode}
    </select>
</mapper>
