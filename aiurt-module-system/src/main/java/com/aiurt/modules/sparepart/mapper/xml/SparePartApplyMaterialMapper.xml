<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aiurt.modules.sparepart.mapper.SparePartApplyMaterialMapper">
    <select id="readAll" resultType="com.aiurt.modules.sparepart.entity.SparePartApplyMaterial">
       SELECT
            spare_part_apply_material.*,
            t2.major_name majorName,
            t3.system_name systemName,
            t4.base_type_name baseTypeCodeName,
            d2.item_text typeName,
            spare_part_apply_material.inventory num,
            d3.item_text unit,
            t1.name material_name
        FROM
            spare_part_apply_material spare_part_apply_material
            LEFT JOIN material_base t1 ON spare_part_apply_material.material_code = t1.`code`
            LEFT JOIN cs_major t2 ON t1.major_code = t2.major_code
            LEFT JOIN cs_subsystem t3 ON t1.system_code = t3.system_code
            LEFT JOIN material_base_type t4 ON t1.base_type_code = t4.base_type_code
            LEFT JOIN sys_dict AS dict2 ON dict2.dict_code = 'material_type'
            LEFT JOIN sys_dict_item AS d2 ON d2.item_value = t1.type AND dict2.id = d2.dict_id
            LEFT JOIN sys_dict AS dict3 ON dict3.dict_code = 'materian_unit'
            LEFT JOIN sys_dict_item AS d3 ON d3.item_value = t1.unit AND dict3.id = d3.dict_id
        WHERE
            spare_part_apply_material.del_flag =0


    </select>
</mapper>
