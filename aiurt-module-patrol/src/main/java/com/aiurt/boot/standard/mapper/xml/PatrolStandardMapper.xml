<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aiurt.boot.standard.mapper.PatrolStandardMapper">

    <select id="pageList" resultType="com.aiurt.boot.entity.patrol.standard.PatrolStandard">
        select *,b.major_name as professionName, c.system_name as subsystemName ,d.name as deviceTypeName
               from patrol_standard as a
        left join cs_major b on a.profession_code =b.major_code
        left join cs_subsystem c on a.subsystem_code =c.system_code
        left join device_type d on a.device_type_code =d.code
        where a.del_flag =0
        <if test="patrolStandard.name !=null ">
            AND a.name LIKE CONCAT ('%', #{patrolStandard.name}, '%')
        </if>
        <if test="patrolStandard.professionCode !=null ">
            AND a.profession_code = #{patrolStandard.professionCode}
        </if>
        <if test="patrolStandard.subsystemCode !=null ">
            AND a.subsystem_code = #{patrolStandard.subsystemCode}
        </if>
        <if test="patrolStandard.code !=null ">
            AND a.code = #{patrolStandard.code}
        </if>
        <if test="patrolStandard.createBy !=null ">
            AND a.create_by = #{patrolStandard.create_by}
        </if>
        order by a.create_time desc
    </select>
</mapper>
