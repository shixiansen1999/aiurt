<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aiurt.boot.plan.mapper.PatrolPlanOrganizationMapper">

    <select id="selectOrgByPlanCode" resultType="com.aiurt.boot.plan.param.PatrolPlanOrganizationParam">
        SELECT sd.depart_name,
        ppo.*
        FROM patrol_plan_organization ppo
        JOIN sys_depart sd ON ppo.organization_code = sd.org_code
        where ppo.del_flag = 0
        <if test="planCode != null and planCode != ''">
            and ppo.plan_code=#{planCode}
        </if>
    </select>

    <select id="getPlanCodeByUserOrg" resultType="java.lang.String">
        select distinct plan_code
        from patrol_plan_organization
        where del_flag = 0
    </select>
</mapper>
