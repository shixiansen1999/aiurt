<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aiurt.modules.fault.mapper.DeviceChangeSparePartMapper">

    <select id="queryDeviceChangeByFaultCode" parameterType="string" resultType="com.aiurt.modules.fault.entity.DeviceChangeSparePart">
        select
        a.*,
        b.name as new_spare_part_name,
        b.specifications,
        c.name as device_name,
        da.manufactor_code as old_spare_part_name
        from device_change_spare_part a
        LEFT JOIN material_base b ON  a.new_spare_part_code = b.code
        LEFT JOIN device c on c.code = a.code
        LEFT join device_assembly da on a.old_spare_part_code = da.code
        where a.code = #{faultCode}
        and a.del_flag = 0
    </select>
</mapper>
